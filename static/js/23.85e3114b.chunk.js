(this["webpackJsonp@chainsafe/chainbridge-ui"]=this["webpackJsonp@chainsafe/chainbridge-ui"]||[]).push([[23],{1122:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return l}));var r=n(5),i=n(6),o=n(1123),a=n(371),c=(n(100),n(329));function s(t){return e.from(t.startsWith("0x")?t.slice(2):t,"hex")}function u(e){return e?s(e):null}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w0w";Object(r.a)(this,t),this.transport=void 0,this.transport=e,e.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","starkGetPublicKey","starkSignOrder","starkSignTransfer","starkProvideQuantum"],n)}return Object(i.a)(t,[{key:"getAddress",value:function(t,n,r){var i=Object(o.b)(t),a=e.alloc(1+4*i.length);return a[0]=i.length,i.forEach((function(e,t){a.writeUInt32BE(e,1+4*t)})),this.transport.send(224,2,n?1:0,r?1:0,a).then((function(e){var t={},n=e[0],i=e[1+n];return t.publicKey=e.slice(1,1+n).toString("hex"),t.address="0x"+e.slice(1+n+1,1+n+1+i).toString("ascii"),r&&(t.chainCode=e.slice(1+n+1+i,1+n+1+i+32).toString("hex")),t}))}},{key:"provideERC20TokenInformation",value:function(e){var t=e.data;return this.transport.send(224,10,0,0,t).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}},{key:"signTransaction",value:function(t,n){var r,i=this,s=Object(o.b)(t),u=0,l=e.from(n,"hex"),d=[],h=Object(c.decode)(l),f=0;if(h.length>6){var g=Object(c.encode)(h.slice(-3));f=l.length-(g.length-1)}for(var p=function(){var t=0===u?149-4*s.length:150,n=u+t>l.length?l.length-u:t;0!=f&&u+n==f&&n--;var r=e.alloc(0===u?1+4*s.length+n:n);0===u?(r[0]=s.length,s.forEach((function(e,t){r.writeUInt32BE(e,1+4*t)})),l.copy(r,1+4*s.length,u,u+n)):l.copy(r,0,u,u+n),d.push(r),u+=n};u!==l.length;)p();return Object(o.a)(d,(function(e,t){return i.transport.send(224,4,0===t?0:128,0,e).then((function(e){r=e}))})).then((function(){return{v:r.slice(0,1).toString("hex"),r:r.slice(1,33).toString("hex"),s:r.slice(33,65).toString("hex")}}),(function(e){throw function(e){return e&&27264===e.statusCode?new a.a("Please enable Contract data on the Ethereum app Settings"):e}(e)}))}},{key:"getAppConfiguration",value:function(){return this.transport.send(224,6,0,0).then((function(e){var t={};return t.arbitraryDataEnabled=1&e[0],t.erc20ProvisioningNecessary=2&e[0],t.starkEnabled=4&e[0],t.version=e[1]+"."+e[2]+"."+e[3],t}))}},{key:"signPersonalMessage",value:function(t,n){for(var r,i=this,a=Object(o.b)(t),c=0,s=e.from(n,"hex"),u=[],l=function(){var t=0===c?149-4*a.length-4:150,n=c+t>s.length?s.length-c:t,r=e.alloc(0===c?1+4*a.length+4+n:n);0===c?(r[0]=a.length,a.forEach((function(e,t){r.writeUInt32BE(e,1+4*t)})),r.writeUInt32BE(s.length,1+4*a.length),s.copy(r,1+4*a.length+4,c,c+n)):s.copy(r,0,c,c+n),u.push(r),c+=n};c!==s.length;)l();return Object(o.a)(u,(function(e,t){return i.transport.send(224,8,0===t?0:128,0,e).then((function(e){r=e}))})).then((function(){return{v:r[0],r:r.slice(1,33).toString("hex"),s:r.slice(33,65).toString("hex")}}))}},{key:"signEIP712HashedMessage",value:function(t,n,r){var i=s(n),a=s(r),c=Object(o.b)(t),u=e.alloc(1+4*c.length+32+32,0),l=0;return u[0]=c.length,c.forEach((function(e,t){u.writeUInt32BE(e,1+4*t)})),l=1+4*c.length,i.copy(u,l),l+=32,a.copy(u,l),this.transport.send(224,12,0,0,u).then((function(e){return{v:e[0],r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkGetPublicKey",value:function(t,n){var r=Object(o.b)(t),i=e.alloc(1+4*r.length);return i[0]=r.length,r.forEach((function(e,t){i.writeUInt32BE(e,1+4*t)})),this.transport.send(240,2,n?1:0,0,i).then((function(e){return e.slice(0,e.length-2)}))}},{key:"starkSignOrder",value:function(t,n,r,i,a,c,s,l,d,h,f){var g=u(n),p=u(i),E=Object(o.b)(t),v=e.alloc(1+4*E.length+20+32+20+32+4+4+8+8+4+4,0),I=0;return v[0]=E.length,E.forEach((function(e,t){v.writeUInt32BE(e,1+4*t)})),I=1+4*E.length,g&&g.copy(v,I),I+=20,e.from(r.toString(16).padStart(64,"0"),"hex").copy(v,I),I+=32,p&&p.copy(v,I),I+=20,e.from(a.toString(16).padStart(64,"0"),"hex").copy(v,I),I+=32,v.writeUInt32BE(c,I),I+=4,v.writeUInt32BE(s,I),I+=4,e.from(l.toString(16).padStart(16,"0"),"hex").copy(v,I),I+=8,e.from(d.toString(16).padStart(16,"0"),"hex").copy(v,I),I+=8,v.writeUInt32BE(h,I),I+=4,v.writeUInt32BE(f,I),this.transport.send(240,4,1,0,v).then((function(e){return{r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkSignTransfer",value:function(t,n,r,i,a,c,l,d,h){var f=u(n),g=s(i),p=Object(o.b)(t),E=e.alloc(1+4*p.length+20+32+32+4+4+8+4+4,0),v=0;return E[0]=p.length,p.forEach((function(e,t){E.writeUInt32BE(e,1+4*t)})),v=1+4*p.length,f&&f.copy(E,v),v+=20,e.from(r.toString(16).padStart(64,"0"),"hex").copy(E,v),v+=32,g.copy(E,v),v+=32,E.writeUInt32BE(a,v),v+=4,E.writeUInt32BE(c,v),v+=4,e.from(l.toString(16).padStart(16,"0"),"hex").copy(E,v),v+=8,E.writeUInt32BE(d,v),v+=4,E.writeUInt32BE(h,v),this.transport.send(240,4,2,0,E).then((function(e){return{r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkProvideQuantum",value:function(t,n){var r=u(t),i=e.alloc(52,0);return r&&r.copy(i,0),e.from(n.toString(16).padStart(64,"0"),"hex").copy(i,20),this.transport.send(240,8,0,0,i).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}}]),t}()}.call(this,n(224).Buffer)},1123:function(e,t,n){"use strict";function r(e){var t=[];return e.split("/").forEach((function(e){var n=parseInt(e,10);isNaN(n)||(e.length>1&&"'"===e[e.length-1]&&(n+=2147483648),t.push(n))})),t}function i(e,t){return Promise.resolve().then((function(){return function e(n,r,i){return n>=r.length?i:t(r[n],n).then((function(t){return i.push(t),e(n+1,r,i)}))}(0,e,[])}))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},329:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getLength=t.decode=t.encode=void 0;var r=n(17);function i(e,t){if("00"===e.slice(0,2))throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function o(t,n){if(t<56)return e.from([t+n]);var r=c(t),i=c(n+55+r.length/2);return e.from(i+r,"hex")}function a(e){return"0x"===e.slice(0,2)}function c(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function s(t){if(!e.isBuffer(t)){if("string"===typeof t)return a(t)?e.from((n="string"!==typeof(i=t)?i:a(i)?i.slice(2):i).length%2?"0"+n:n,"hex"):e.from(t);if("number"===typeof t||"bigint"===typeof t)return t?function(t){var n=c(t);return e.from(n,"hex")}(t):e.from([]);if(null===t||void 0===t)return e.from([]);if(t instanceof Uint8Array)return e.from(t);if(r.isBN(t))return e.from(t.toArray());throw new Error("invalid type")}var n,i;return t}t.encode=function t(n){if(Array.isArray(n)){for(var r=[],i=0;i<n.length;i++)r.push(t(n[i]));var a=e.concat(r);return e.concat([o(a.length,192),a])}var c=s(n);return 1===c.length&&c[0]<128?c:e.concat([o(c.length,128),c])},t.decode=function(t,n){if(void 0===n&&(n=!1),!t||0===t.length)return e.from([]);var r=function t(n){var r,o,a,c,s,u=[],l=n[0];if(l<=127)return{data:n.slice(0,1),remainder:n.slice(1)};if(l<=183){if(r=l-127,a=128===l?e.from([]):n.slice(1,r),2===r&&a[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:a,remainder:n.slice(r)}}if(l<=191){if(o=l-182,n.length-1<o)throw new Error("invalid RLP: not enough bytes for string length");if((r=i(n.slice(1,o).toString("hex"),16))<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if((a=n.slice(o,r+o)).length<r)throw new Error("invalid RLP: not enough bytes for string");return{data:a,remainder:n.slice(r+o)}}if(l<=247){for(r=l-191,c=n.slice(1,r);c.length;)s=t(c),u.push(s.data),c=s.remainder;return{data:u,remainder:n.slice(r)}}o=l-246,r=i(n.slice(1,o).toString("hex"),16);var d=o+r;if(d>n.length)throw new Error("invalid rlp: total length is larger than the data");if(0===(c=n.slice(o,d)).length)throw new Error("invalid rlp, List has a invalid length");for(;c.length;)s=t(c),u.push(s.data),c=s.remainder;return{data:u,remainder:n.slice(d)}}(s(t));if(n)return r;if(0!==r.remainder.length)throw new Error("invalid remainder");return r.data},t.getLength=function(t){if(!t||0===t.length)return e.from([]);var n=s(t),r=n[0];if(r<=127)return n.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var o=r-246;return o+i(n.slice(1,o).toString("hex"),16)}}).call(this,n(224).Buffer)},371:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return d}));var r={},i={},o=function(e,t){i[e]=t},a=function(e){var t=function(t,n){Object.assign(this,n),this.name=e,this.message=t||e,this.stack=(new Error).stack};return t.prototype=new Error,r[e]=t,t};a("AccountNameRequired"),a("AccountNotSupported"),a("AmountRequired"),a("BluetoothRequired"),a("BtcUnmatchedApp"),a("CantOpenDevice"),a("CashAddrNotSupported"),a("CurrencyNotSupported"),a("DeviceAppVerifyNotSupported"),a("DeviceGenuineSocketEarlyClose"),a("DeviceNotGenuine"),a("DeviceOnDashboardExpected"),a("DeviceOnDashboardUnexpected"),a("DeviceInOSUExpected"),a("DeviceHalted"),a("DeviceNameInvalid"),a("DeviceSocketFail"),a("DeviceSocketNoBulkStatus"),a("DisconnectedDevice"),a("DisconnectedDeviceDuringOperation"),a("EnpointConfig");var c=a("EthAppPleaseEnableContractData"),s=(a("FeeEstimationFailed"),a("FirmwareNotRecognized"),a("HardResetFail"),a("InvalidXRPTag"),a("InvalidAddress"),a("InvalidAddressBecauseDestinationIsAlsoSource"),a("LatestMCUInstalledError"),a("UnknownMCU"),a("LedgerAPIError"),a("LedgerAPIErrorWithMessage"),a("LedgerAPINotAvailable"),a("ManagerAppAlreadyInstalled"),a("ManagerAppRelyOnBTC"),a("ManagerAppDepInstallRequired"),a("ManagerAppDepUninstallRequired"),a("ManagerDeviceLocked"),a("ManagerFirmwareNotEnoughSpace"),a("ManagerNotEnoughSpace"),a("ManagerUninstallBTCDep"),a("NetworkDown"),a("NoAddressesFound"),a("NotEnoughBalance"),a("NotEnoughBalanceToDelegate"),a("NotEnoughBalanceInParentAccount"),a("NotEnoughSpendableBalance"),a("NotEnoughBalanceBecauseDestinationNotCreated"),a("NoAccessToCamera"),a("NotEnoughGas"),a("NotSupportedLegacyAddress"),a("GasLessThanEstimate"),a("PasswordsDontMatch"),a("PasswordIncorrect"),a("RecommendSubAccountsToEmpty"),a("RecommendUndelegation"),a("TimeoutTagged"),a("UnexpectedBootloader"),a("MCUNotGenuineToDashboard"),a("RecipientRequired"),a("UnavailableTezosOriginatedAccountReceive"),a("UnavailableTezosOriginatedAccountSend"),a("UpdateFetchFileFail"),a("UpdateIncorrectHash"),a("UpdateIncorrectSig"),a("UpdateYourApp"),a("UserRefusedDeviceNameChange"),a("UserRefusedAddress"),a("UserRefusedFirmwareUpdate"),a("UserRefusedAllowManager"),a("UserRefusedOnDevice"),a("TransportOpenUserCancelled"),a("TransportInterfaceNotAvailable"),a("TransportRaceCondition"));a("TransportWebUSBGestureRequired"),a("DeviceShouldStayInApp"),a("WebsocketConnectionError"),a("WebsocketConnectionFailed"),a("WrongDeviceForAccount"),a("WrongAppForCurrency"),a("ETHAddressNonEIP"),a("CantScanQRCode"),a("FeeNotLoaded"),a("FeeRequired"),a("FeeTooHigh"),a("SyncError"),a("PairingFailed"),a("GenuineCheckFailed"),a("LedgerAPI4xx"),a("LedgerAPI5xx"),a("FirmwareOrAppUpdateRequired"),a("NoDBPathGiven"),a("DBWrongPassword"),a("DBNotReset");function u(e,t){this.name="TransportError",this.message=e,this.stack=(new Error).stack,this.id=t}u.prototype=new Error,o("TransportError",(function(e){return new u(e.message,e.id)}));var l={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function d(e){this.name="TransportStatusError";var t=Object.keys(l).find((function(t){return l[t]===e}))||"UNKNOWN_ERROR",n=function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||t,r=e.toString(16);this.message="Ledger device: "+n+" (0x"+r+")",this.stack=(new Error).stack,this.statusCode=e,this.statusText=t}d.prototype=new Error,o("TransportStatusError",(function(e){return new d(e.statusCode)}))}}]);